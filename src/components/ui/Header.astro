---

---

<!-- Header y Navegación -->
<header class="header">
	<div class="container">
		<button class="hamburger" id="hamburger" onclick="toggleMobileMenu()">
			<span></span>
			<span></span>
			<span></span>
		</button>
		<div class="logo">
			<a href="/"
				><img
					src="/images/logo.png"
					alt="Joyería Galiana"
					class="logo-img"
				/></a
			>
		</div>
		<nav class="nav" id="nav-menu">
			<div class="nav-logo">
				<img src="/images/logo.png" alt="Joyería Galiana" />
			</div>
			<ul>
				<li><a href="/#inicio" onclick="closeMobileMenu()">Inicio</a></li>
				<li><a href="/productos" onclick="closeMobileMenu()">Productos</a></li>
				<li><a href="/#categorias" onclick="closeMobileMenu()">Categorías</a></li>
				<li><a href="/#sobre-nosotros" onclick="closeMobileMenu()">Sobre Nosotros</a></li>
				<li><a href="/#contacto" onclick="closeMobileMenu()">Contacto</a></li>
				<li id="auth-button">
					<a href="#" id="auth-link" onclick="closeMobileMenu()">Iniciar Sesión</a>
				</li>
			</ul>
		</nav>
		<div class="header-right">
			<div
				class="cart-icon"
				onclick="handleCartClick()"
				style="cursor: pointer;"
			>
				<svg
					xmlns="http://www.w3.org/2000/svg"
					width="20"
					height="20"
					viewBox="0 0 24 24"
					fill="none"
					stroke="currentColor"
					stroke-width="2"
					stroke-linecap="round"
					stroke-linejoin="round"
					style="display: inline; vertical-align: middle; margin-right: 4px;"
				>
					<circle cx="9" cy="21" r="1"></circle>
					<circle cx="20" cy="21" r="1"></circle>
					<path
						d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"
					></path>
				</svg>
				<span id="cart-count">0</span>
			</div>
		</div>
		
	</div>
</header>

<script>
	// Función para cerrar el menú
	window.closeMobileMenu = function() {
		const hamburger = document.getElementById('hamburger');
		const nav = document.getElementById('nav-menu');
		const overlay = document.getElementById('nav-overlay');
		
		if (hamburger) hamburger.classList.remove('active');
		if (nav) nav.classList.remove('active');
		if (overlay) overlay.classList.remove('active');
		document.body.style.overflow = '';
	};

	// Función para toggle del menú
	window.toggleMobileMenu = function() {
		const hamburger = document.getElementById('hamburger');
		const nav = document.getElementById('nav-menu');
		let overlay = document.getElementById('nav-overlay');
		
		if (!hamburger || !nav) return;
		
		hamburger.classList.toggle('active');
		nav.classList.toggle('active');
		
		// Congelar/descongelar página
		if (nav.classList.contains('active')) {
			document.body.style.overflow = 'hidden';
		} else {
			document.body.style.overflow = '';
		}
		
		if (!overlay) {
			overlay = document.createElement('div');
			overlay.id = 'nav-overlay';
			overlay.className = 'nav-overlay';
			document.body.appendChild(overlay);
			setupOverlay(overlay);
		}
		
		overlay.classList.toggle('active');
	};

	function setupOverlay(overlay) {
		// Solo cerrar si el click es exactamente en el overlay, no en elementos dentro
		overlay.addEventListener('click', function(e) {
			if (e.target === overlay) {
				console.log('Overlay clicked - closing menu');
				window.closeMobileMenu();
			}
		}, false);
	}

	// Ejecutar al cargar
	document.addEventListener('DOMContentLoaded', function() {
		console.log('Header DOMContentLoaded');
		
		// Crear overlay
		let overlay = document.getElementById('nav-overlay');
		if (!overlay) {
			overlay = document.createElement('div');
			overlay.id = 'nav-overlay';
			overlay.className = 'nav-overlay';
			document.body.appendChild(overlay);
			setupOverlay(overlay);
		}

		// Auth link handler
		const authLink = document.getElementById('auth-link');
		if (authLink) {
			authLink.addEventListener('click', function(e) {
				e.preventDefault();
				window.closeMobileMenu();
				
				const currentUser = localStorage.getItem('currentUser');
				let isAdmin = false;
				
				if (currentUser) {
					try {
						const userData = JSON.parse(currentUser);
						isAdmin = userData.rol === 'admin';
					} catch(err) {}
				}
				
				if (!isAdmin && window.currentUserData) {
					isAdmin = window.currentUserData.rol === 'admin';
				}
				
				if (isAdmin) {
					window.location.href = '/admin-panel.html';
				} else {
					window.location.href = '/admin-login.html';
				}
			});
		}
	});
</script>
